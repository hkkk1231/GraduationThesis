# 技术栈文档

## 🏗️ 系统架构

本项目是一个基于AI工具辅助毕业论文写作的综合性系统，采用模块化设计，整合了文献管理、笔记处理和知识管理功能。

## 💻 核心技术栈

### 前端技术
- **Obsidian** - 知识管理和笔记系统
  - 版本: 1.0+
  - 插件: Dataview, Templates, Graph View
  - 用途: 知识图谱构建、双向链接、笔记管理

### 后端技术
- **Node.js** - JavaScript运行时
  - 版本: LTS
  - 用途: MCP服务器、API接口

### 文献管理
- **Zotero** - 文献管理系统
  - 版本: 7
  - 引用格式: GB/T 7714-2015
  - 插件: Zotfile, 茉需安装茉莉花插件

### 数据存储
- **SQLite** - Zotero数据库
  - 位置: `%USERPROFILE%\Zotero\zotero.sqlite`
  - 用途: 文献元数据存储

## 🔧 开发工具和依赖

### Node.js包管理
```json
{
  "name": "thesis-ai-tools",
  "version": "1.0.0",
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
```

### MCP服务器
- **@modelcontextprotocol/server-zotero** - Zotero集成
- **@modelcontextprotocol/server-pdf-reader** - PDF处理
- **cookjohn/zotero-mcp** - 增强型Zotero服务
- **54yyyu/zotero-mcp** - PDF处理服务

### Python工具
- **Python 3.12** - 脚本开发
- **sqlite3** - 数据库操作
- **pathlib** - 文件路径处理
- **json** - 配置文件处理

## 📁 项目结构

```
毕业论文/
├── config/                    # 配置文件
│   └── zotero_obsidian_config.json
├── ilfow/                     # MCP服务器
│   ├── node_modules/
│   ├── package.json
│   ├── mcp-server.js
│   └── mcp_config.json
├── obsidian/                  # Obsidian笔记库
│   └── 毕业论文/.obsidian/
│       ├── core-plugins.json
│       ├── workspace.json
│       └── graph.json
├── report/                    # 系统报告
│   ├── 系统状态报告.md
│   └── obsidian_zotero_sync_report.json
└── zotero/                    # Zotero文献库
    └── 知网文献/
```

## 🔌 插件和扩展

### Obsidian插件
- **Dataview** - 动态数据查询
- **Templates** - 模板管理
- **Graph View** - 知识图谱可视化
- **Core Plugins** - 文件管理、搜索、链接等

### Zotero插件
- **Zotfile** - PDF注释提取
- **茉莉花插件** - 中文文献增强（按需）
- **GB/T 7714-2015 CSL** - 标准引用格式

## 📊 数据流

### 文献收集流程
1. **数据源** → 知网、Web of Science等
2. **Zotero** → 文献管理和元数据提取
3. **Zotfile** → PDF注释提取
4. **Obsidian** → 笔记整理和知识图谱

### 笔记管理流程
1. **Obsidian** → 笔记创建和编辑
2. **双向链接** → 知识关联
3. **Dataview** → 动态查询
4. **Graph View** → 可视化展示

## 🚀 部署和运行

### 环境要求
- **操作系统**: Windows 10/11
- **Node.js**: LTS版本
- **Python**: 3.12+
- **Zotero**: 7.0+
- **Obsidian**: 1.0+

### 安装步骤
1. **Node.js依赖**:
   ```bash
   cd ilfow
   npm install
   npm run setup
   ```

2. **Zotero配置**:
   - 安装GB/T 7714-2015 CSL样式
   - 配置Zotfile插件
   - 设置引用格式

3. **Obsidian配置**:
   - 安装必需插件
   - 配置模板和工作区

## 🔧 开发和调试

### 开发工具
- **IDE**: VS Code / PyCharm
- **版本控制**: Git
- **调试工具**: 浏览器开发者工具

### 脚本工具
- `install_zotfile.bat` - Zotfile安装
- `setup_obsidian_zotero.py` - 系统集成配置
- `test_obsidian_zotero_sync.py` - 同步测试

## 📈 性能优化

### 数据库优化
- SQLite索引优化
- 批量操作减少IO
- 缓存常用查询

### 文件管理
- 定期清理临时文件
- 优化PDF存储结构
- 压缩历史数据

## 🔒 安全考虑

### 数据安全
- 本地数据存储
- 定期备份配置文件
- 敏感信息不提交到版本控制

### 访问控制
- Zotero API密钥管理
- 本地网络访问限制
- 插件安全审查

## 📝 维护和更新

### 定期维护
- 每月更新依赖包
- 季度性能评估
- 年度架构审查

### 版本管理
- 语义化版本控制
- 详细更新日志
- 向后兼容性保证

---
*文档版本: 1.0*
*创建时间: 2025-11-27*
*最后更新: 2025-11-27*